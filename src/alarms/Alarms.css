:root{
  color-scheme: light;
  --cyan:#00B8E0; --blue-rl:#0399CC; --blue-usafa:#0554A3; --blue-usaf:#08338F; --green-apple:#7DBA00;
  --bg-app:#f6f8fb; --bg-panel:#fff; --text-main:#0b1220; --text-muted:#647084; --line:#e6ebf2;
  --radius:10px; --shadow:0 6px 18px rgba(8,51,143,.06);
}

/* ===== Layout base ===== */
body,.alarms-container{width:100vw;height:calc(100vh - 60px);background:var(--bg-app);display:flex;flex-direction:column;overflow:hidden;color:var(--text-main)}
.content{flex:1 1 auto;min-height:0;overflow:hidden;padding:8px 12px}

/* ===== Toolbar ===== */
.toolbar-shell{position:sticky;top:0;z-index:20;background:var(--bg-panel);border-bottom:1px solid var(--line);transition:height .18s,background .18s,border-color .18s}
.toolbar-shell.open,.toolbar-shell.pinned{height:auto}
.toolbar-shell.collapsed{height:8px;background:var(--green-apple);border-bottom:2px solid var(--green-apple);cursor:pointer}
.toolbar-shell.collapsed .alarms-toolbar{opacity:0;pointer-events:none;transform:translateY(-8px) scaleY(.98)}

.alarms-toolbar{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bg-panel);box-shadow:var(--shadow);flex-wrap:wrap;border-bottom:2px solid var(--cyan);transition:opacity .15s,transform .15s}
.btn-refresh,.btn-clear,.btn-danger{display:inline-flex;align-items:center;gap:8px}
.btn-refresh{background:var(--cyan);border:0;color:#fff;padding:9px 14px;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:background .18s,transform .05s}
.btn-refresh:hover{background:var(--blue-rl)} .btn-refresh:active{transform:translateY(1px)} .btn-refresh:disabled{opacity:.65;cursor:not-allowed}
.btn-clear,.btn-danger{background:#fff;border:1px solid var(--line);color:var(--text-main);padding:8px 12px;border-radius:8px;font-size:.9rem;cursor:pointer;transition:background .15s,border-color .15s}
.btn-clear:hover{background:#f1f5f9;border-color:var(--cyan)}
.btn-danger{border-color:#fca5a5;color:#b91c1c}
.btn-danger:hover{background:#fee2e2;border-color:#ef4444}

.filter-input,.filter-select{border:1px solid var(--line);border-radius:8px;color:var(--text-main)}
.filter-input{min-width:150px;flex:1 1 150px;padding:8px 12px;background:#f9fbfe;outline:0;transition:box-shadow .15s,border-color .15s,background .15s}
.filter-input.small{min-width:120px;flex-basis:120px}
.filter-input::placeholder{color:var(--text-muted)}
.filter-input:focus{border-color:var(--cyan);box-shadow:0 0 0 3px rgba(0,184,224,.18);background:#fff}
.filter-select{padding:8px 12px;background:#fff}

.range-dash{color:var(--text-muted)}
.status{color:var(--text-muted)}
.count{font-weight:600;color:var(--blue-usafa)}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace}

/* ===== Mostrar/ocultar colunas ===== */
.col-controls{display:flex;flex-wrap:wrap;gap:8px;width:100%;margin:6px 0 8px}
.col-toggle{font-size:.85rem;color:var(--text-muted);background:#fff;padding:4px 8px;border:1px solid var(--line);border-radius:6px;cursor:pointer;user-select:none}
.col-toggle input{margin-right:4px}

/* ===== Tabela ===== */
.alarms-table-scroll{height:100%;overflow:auto;border-radius:8px}
.alarms-table{width:100%;border-collapse:separate;border-spacing:0;background:var(--bg-panel);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);margin:0;table-layout:fixed}
.alarms-table th,.alarms-table td{padding:8px 12px;text-align:left;border-right:1px solid var(--line);font-size:.95rem;white-space:normal;word-break:break-word}
.alarms-table :is(th,td):last-child{border-right:0}
.alarms-table thead th{position:sticky;top:0;background:var(--blue-usaf);color:#fff;font-weight:700;letter-spacing:.2px;z-index:3}
.alarms-table thead th:first-child{left:0;z-index:5;box-shadow:1px 0 0 var(--line)}
.alarms-table tbody td:first-child{left:0;z-index:4;background:inherit;box-shadow:1px 0 0 var(--line)}
.alarms-table :is(thead th:first-child,tbody td:first-child){position:sticky}
.alarms-table tbody tr{background:#fff;transition:background .12s,box-shadow .12s}
.alarms-table tbody tr:nth-child(even){background:#f7fbff}
.alarms-table tbody tr:hover{background:#eef6ff;box-shadow:inset 3px 0 0 0 var(--green-apple)}
.sortable{cursor:pointer;user-select:none}
.sortable:hover{background:var(--blue-usafa)}
.arrow{margin-left:6px;font-size:.9em;opacity:.9}
.col-priority{width:110px}

/* Comentários */
.comment-cell{min-width:220px}
.comment-input{width:100%;min-height:120px;resize:none;overflow:hidden;padding:6px 8px;border:1px solid var(--line);border-radius:6px;background:#fff;color:var(--text-main);font-size:.92rem;line-height:1.25rem;box-sizing:border-box;transition:height .1s,border-color .15s,box-shadow .15s}
.comment-input:focus{outline:0;border-color:var(--cyan);box-shadow:0 0 0 3px rgba(0,184,224,.18)}

/* ===== Cards ===== */
.cards-layout{height:100%;display:flex;gap:12px;align-items:stretch;overflow:hidden}
.cards-scroll{flex:1 1 auto;min-width:0;height:100%;overflow:auto;padding-right:4px;border-right:1px solid #eee}
.cards-toolbar{display:flex;gap:.5rem;align-items:center;margin:.5rem 0 1rem}
.cards-toolbar .sort-control{display:inline-flex;align-items:center;gap:.5rem;font-size:.9rem}
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:12px;width:100%}

.alarm-card{border:1px solid #e6e8ec;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 2px rgba(16,24,40,.04);display:flex;flex-direction:column;gap:8px;transition:box-shadow .15s,transform .1s,background-color .2s;cursor:default;text-align:left}
.alarm-card:hover{box-shadow:0 4px 14px rgba(16,24,40,.08);transform:translateY(-1px)}
.alarm-card.old{background:#ffe9e9}
.alarm-card.status-tratado{background:#fff9c4}
.alarm-card.status-concluido{background:#e7fbe7}
.alarm-card.status-oportunidade{background:#e6f2ff}

.card-head{display:flex;justify-content:space-between;align-items:center}
.card-title{display:flex;flex-wrap:wrap;gap:6px;font-size:14px}
.card-meta{display:flex;flex-wrap:wrap;gap:10px 16px;font-size:13px;color:#334155}

.chip{display:inline-flex;align-items:center;padding:2px 8px;border-radius:999px;font-size:12px;font-weight:600}
.chip.server{background:#eef2ff;color:#3730a3;border:1px solid #c7d2fe}
.chip.prio{background:#f1f5f9;color:#0f172a;border:1px solid #e2e8f0}
.chip.prio.p0{background:#ecfeff;color:#164e63;border-color:#a5f3fc}
.chip.prio.p1{background:#f0fdf4;color:#14532d;border-color:#bbf7d0}
.chip.prio.p2{background:#fffbeb;color:#92400e;border-color:#fde68a}
.chip.prio.p3{background:#fef2f2;color:#7f1d1d;border-color:#fecaca}

.card-title .point{font-size:15px}
.card-title .site{color:#475569}
.meta .meta-label{color:#64748b;margin-right:4px;font-weight:600}
.meta.value{font-weight:600;color:#0f172a}

.card-flags{display:flex;gap:8px;flex-wrap:wrap}
.flag{font-size:12px;padding:2px 8px;border-radius:6px;border:1px solid transparent}
.flag.ok{background:#e8fff3;color:#065f46;border-color:#a7f3d0}
.flag.warn{background:#fff7ed;color:#9a3412;border-color:#fed7aa}
.flag.neutral{background:#f1f5f9;color:#334155;border-color:#cbd5e1}
.flag.active{background:#eef2ff;color:#3730a3;border-color:#c7d2fe}
.flag.status{border-color:#cbd5e1;background:#f8fafc;color:#334155}
.flag.status.pending{background:#fff7ed;color:#9a3412;border-color:#fed7aa}
.flag.status.progress{background:#fff9c4;color:#713f12;border-color:#fde68a}
.flag.status.done{background:#e7fbe7;color:#14532d;border-color:#a7f3d0}

.empty-state{grid-column:1/-1;text-align:center;color:#64748b;padding:24px 0;border:1px dashed #e2e8f0;border-radius:12px;background:#fafafa}

/* ===== Painel de insights ===== */
.insight-panel{flex:0 0 340px;width:340px;max-width:340px;padding:12px;position:sticky;top:12px;align-self:flex-start;max-height:calc(100vh - 120px);overflow:auto;border-radius:8px;border:1px solid #eee;background:#fff}

/* ===== Modal ===== */
.modal{position:fixed;inset:0;background:rgba(11,18,32,.35);display:flex;align-items:center;justify-content:center;z-index:50}
.modal-content{width:min(980px,96vw);max-height:90vh;overflow:auto;background:var(--bg-panel);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:12px 16px 16px}
.modal-head{display:flex;align-items:center;justify-content:space-between}
.api-close{background:transparent;border:none;color:var(--text-main);font-size:1.4rem;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}

.api-list{margin-top:8px;display:flex;flex-direction:column;gap:8px}
.api-item{display:grid;grid-template-columns:100px 1fr auto auto;gap:10px;align-items:center;border:1px solid var(--line);border-radius:8px;padding:8px 10px}
.api-toggle{display:inline-flex;gap:6px;align-items:center}
.api-desc .api-meta{color:var(--text-muted);font-size:.9rem}
.api-actions{display:flex;gap:8px}
.api-div{border:0;border-top:1px solid var(--line);margin:10px 0}

.api-form{padding-top:6px}
.api-form .api-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px 12px;margin-top:8px}
.api-form .api-actions{margin-top:10px;display:flex;justify-content:flex-end;gap:8px}

/* ===== Utilidades específicas ===== */
.count-badge{display:inline-block;font-weight:600;font-size:12px;line-height:1;padding:3px 8px;border-radius:999px;border:1px solid var(--line);background:var(--bg-panel);margin-left:6px}
.count-badge.count-click{cursor:pointer}
.count-badge.count-click:hover{background:#f2f6ff}

.point-btn{background:none;border:0;padding:0;margin:0;font:inherit;color:inherit;cursor:pointer}
.point-btn .point{text-decoration:underline}
.point-btn:hover .point{text-decoration:underline}

/* ===== Responsivo / Acessibilidade ===== */
@media (max-width:360px){.cards-grid{grid-template-columns:1fr}}
@media (max-width:1100px){.insight-panel{display:none}}

@media (prefers-reduced-motion:reduce){
  *{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important;scroll-behavior:auto !important}
}

/* ===== Priority Slider ===== */
.priority-range{display:flex;flex-direction:column;gap:6px;min-width:220px}
.priority-range .priority-title{font-weight:600}
.priority-range .range-row{display:flex;align-items:center;gap:8px}
.priority-range .range-row input[type='range']{flex:1}
.priority-range .range-labels{display:flex;justify-content:space-between;font-size:12px;opacity:.85}

/* ===== Status na tabela ===== */
.alarms-table tbody tr.status-tratado{background:#fff9c4}
.alarms-table tbody tr.status-concluido{background:#e7fbe7}
.alarms-table tbody tr.status-oportunidade{background:#e6f2ff}

/* Alinhamento à esquerda (tabela, cards e modal) */
.alarms-table th,
.alarms-table td {
  text-align: left;
}

.alarm-card,
.alarm-card .card-head,
.alarm-card .card-title,
.alarm-card .card-body,
.card-value,
.card-meta {
  text-align: left;
}

.modal-content,
.api-list,
.api-item,
.api-label,
.api-desc,
.api-meta {
  text-align: left;
}

.cards-grid,
.table-wrap,
.content {
  text-align: left;
}

.point-btn,
.point-btn .point {
  text-align: left;
}
